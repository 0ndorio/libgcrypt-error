2003-06-01  Marcus Brinkmann  <marcus@g10code.de>

	* src/mkerrcodes1.awk: New file.
	* src/mkerrcodes2.awk: New file.
	* src/mkerrnos.awk: New file.
	* src/errnos.in: New file.
	* src/code-from-errno.c: New file.
	* src/code-to-errno.c: New file.
	* src/Makefile.am (libgpg_error_la_SOURCES): Remove err-sources.h
	and err-codes.h.  Add code-to-errno.c and code-from-errno.c.
	(code-to-errno.h): New target.
	(code-from-errno.h): Likewise.
	(EXTRA_DIST): Add mkerrnos.awk, errnos.in, and mkerrcodes1.awk.
	(BUILT_SOURCES): Add code-to-errno.h and code-from-errno.h.
	(CLEANFILES): Likewise.
	* src/strerror.c (gpg_strerror): Use strerror for system errors.
	* src/err-codes.h.in: Add 16382 (Unknown system error).
	* src/gpg-error.h (gpg_err_code_t): Add system errors.
	(GPG_ERR_CODE_DIM): Change to 32768.
	(GPG_ERR_SYSTEM_ERROR): New macro.
	(gpg_err_code_from_errno): New prototype.
	(gpg_err_code_to_errno): Likewise.

	* src/Makefile.am (nobase_include_HEADERS): Rename target to ...
	(include_HEADERS): ... this.  Change file to gpg-error.h
	(libgpg_error_la_SOURCES): Change gpg/error.h to gpg-error.h.
	* src/gpg/error.h: Move to ...
	* src/gpg-error.h: ... here.  New file.
	* src/strerror.c: Include <gpg-error.h>, not <gpg/error.h>.
	* src/strsource.c: Likewise.
	
	* src/gpg/error.h (gpg_error_t): Change type to unsigned int, not
	long.

2003-05-26  Marcus Brinkmann  <marcus@g10code.de>

	* src/gpg/error.h (gpg_make_error): Only OR in the error source if
	there is an error, this allows to test for success with "if (!err)"
	and similar tests.

2003-05-15  Marcus Brinkmann  <marcus@g10code.de>

	* src/mkstrtable.awk: Add exception clause to license about the
	output of the script.
	* configure.ac: Change license to LGPL 2.1 or later.
	* Makefile.am: Likewise.
	* src/Makefile.am: Likewise.
	* src/err-codes.h.in: Likewise.
	* src/err-sources.h.in: Likewise.
	* src/strsource.c: Likewise.
	* src/strerror.c: Likewise.
	* src/gpg/error.h: Likewise.
	* tests/Makefile.am: Likewise.

	* src/mkstrtable.awk: New variable HEADER.  Copy input until first
	line with an actual code and description occurs.	
	* src/err-codes.h.in: Uncomment license, so it is copied into the
	output.
	* src/err-sources.h.in: Likewise.

2003-05-15  Marcus Brinkmann  <marcus@g10code.de>

	* COPYING.LIB: New file.

2003-05-15  Marcus Brinkmann  <marcus@g10code.de>

	* Initial check-in.

 Copyright 2003 g10 Code GmbH

 This file is free software; as a special exception the author gives
 unlimited permission to copy and/or distribute it, with or without
 modifications, as long as this notice is preserved.

 This file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY, to the extent permitted by law; without even the
 implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
